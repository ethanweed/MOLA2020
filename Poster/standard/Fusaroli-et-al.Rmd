---
poster_height: "36in" # height in inches of poster
poster_width: "48in" # width in inches of poster
font_size: "30pt" #please see github.com/brentthorne/posterdown for compatible options.
title: Intact but Atypical Lexical and Syntactic Alignment in Spontaneous Speech of Children with Autism Spectrum Disorder
author:
  - name: Riccardo Fusaroli
    affil: 1
    orcid: '0000-0003-4775-5219'
  - name: Ethan Weed
    affil: 1
    orcid: '0000-0002-3921-9101'
  - name: Deborah Fein
    affil: 2
    orcid: '0000-0002-8478-5938'
  - name: Letitia Naigles
    affil: 2
    orcid: '0000-0003-2168-9700'
affiliation:
  - num: 1
    address: Aarhus University
  - num: 2
    address: University of Connecticut
column_numbers: 3
#logoright_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png
#logoleft_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png

# colors:
  # \#7F6024
  # \#A5B1D8
  # \#8FA2DF
  # \#E6ECF7
  # \#E6ECF7  
  # orange from cosine figure: #47A2F1
  # blue from cosine figure: #FFA35F
  # darkish blue: \#8FA2DF
  # bronze color from painting: \#B7802A
  # corn yellow color from painting: \#EDEEC6
  # very pale blue from painting: \#F0F8FF
  # golden hue from grass in painting: \#D8B743

# body_bgcol: \#8FA2DF

primary_colour: \#B7802A
secondary_colour: \#F0F8FF
accent_colour: \#E7F2FA

title_textcol: \#F0F8FF
affiliation_textsize: "25pt"

sectitle_bgcol: \#8FA2DF
sectitle_textcol: \#F0F8FF


output: 
  posterdown::posterdown_html:
    self_contained: false
bibliography: packages.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r libraries}
pacman::p_load("dplyr", "kableExtra", "tidyverse")
```


```{r colorbar, echo=FALSE}
# for rendering pdf
#pagedown::chrome_print("/Users/ethan/Documents/GitHub/MOLA2020/Poster/standard/Fusaroli-et-al.Rmd")

# colorbar function copied from: https://stackoverflow.com/questions/49916591/how-to-reverse-only-one-bar-in-one-cell-if-the-value-is-negative-with-kableextra

# probably get rid of this, but leave it in for now, just in case I want to go back to tables with colorbars
cb <- function(x) {
  range <- max(abs(x))
  width <- round(abs(x / range * 50), 2)
  ifelse(
    x > 0,
    paste0(
      '<span style="display: inline-block; border-radius: 2px; ', 
      'padding-right: 2px; background-color: #FFD700; width: ', 
      width, '%; margin-left: 50%; text-align: right;">', x, '</span>'
    ),
    paste0(
      '<span style="display: inline-block; border-radius: 2px; ', 
      'padding-right: 2px; background-color: #F0F8FF; width: ', 
      width, '%; margin-right: 50%; text-align: right; float: right; ">', x, '</span>'
    )
  )
}


# function for making bar-plots out of table data

barcolor1 <- "#8FA2DF"
barcolor2 <- "#D8B743"

bp <- function(t, title){
  t$Predictors <- factor(t$Predictors, levels = t$Predictors)
  t$Predictors <- fct_rev(t$Predictors)
  t <- gather(t, key = "Type", value = "LogOdds", -Predictors)

    ggplot(t, aes(t$Predictors, LogOdds)) +
    geom_bar(aes(fill = Type), position = "dodge", stat="identity") +
    coord_flip() +
    #scale_fill_brewer(palette = "Dark2") +
    scale_fill_manual("legend", values = c("Lexical" = barcolor1, "Syntactic" = barcolor2)) +
    theme_classic() +
    labs( y = "Beta (Log Odds)",
          x = "Predictors", 
          title = title)
}

```


# What is Conversational Alignment?

```{r echo=FALSE, fig.cap = "Edmund C. Tarbell, \"Marjorie and Little Edmund\"",  out.width= "95%", out.height= "95%", fig.align="center"}
knitr::include_graphics("Cosine-similarity-vert.jpg")
```




# Do Children Align?  
  
  
```{r fig1, fig.cap = "Alignment Rate: Do Children Align?", message=FALSE, warning = F, out.width='100%'}


t1 <- read.csv("/Users/ethan/Documents/GitHub/MOLA2020/Poster/Table1a.csv")

bp(t1, "")

########################## for making tables with colorbars; probably get rid of this: too unclear
#t1 %>%
#  mutate(
#    Lexical = cb(Lexical),
#    Syntactic = cb(Syntactic)
#  ) %>%
#  knitr::kable(escape = F, caption = caption, booktabs = FALSE, align = "l")

#kable(t1, "html", align = "c", caption = "Alignment Rate: Do Children Align?", booktabs = T)

```



# How Much do Children Align?
```{r fig2, fig.cap = "Alignment Rate: Do Children Align?", out.width='80%'}


t2 <- read.csv("/Users/ethan/Documents/GitHub/MOLA2020/Poster/Table2a.csv")

bp(t2, "")

```





# How Much of Children's Alignment is Exact Repetition?

```{r fig3, fig.cap = "Exact Repetitions", out.width='80%'}


t3 <- read.csv("/Users/ethan/Documents/GitHub/MOLA2020/Poster/Table3a.csv")

bp(t3, "")

```


# Next Steps



# Conclusion



```{r, include=FALSE}
knitr::write_bib(c('knitr','rmarkdown','posterdown','pagedown'), 'packages.bib')
```

# References
